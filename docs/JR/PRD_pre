# ClimateSeal 平台需求规格说明书

## 1. 系统概述

### 1.1 系统目标
ClimateSeal平台旨在提供一个完整的碳足迹管理解决方案，通过AI技术辅助企业进行产品碳足迹核算、管理和报告生成。

### 1.2 系统架构
系统采用Web应用架构，主要分为以下部分：
- 左侧导航栏：提供所有功能模块的快速访问
  页面布局
   - 左侧导航栏：
     - 固定宽度，显示所有功能模块入口
     - 模块包括：工作台、任务管理、产品碳足迹（含子菜单：产品管理、AI建模核算、碳足迹结果生成）、供应商管理、AI知识库、组织管理、下载管理、操作日志
     - 当前选中的菜单项高亮显示
     - 带有子菜单的项目显示展开/收起图标
- 右侧工作区：展示当前选中模块的具体内容
- 右上角为用户信息，展示用户名，下拉选项包含：
  - 账户管理
    - 点击后跳转至账户管理页面
      页面内包含上下两部分内容：
      - 上部分：用户信息
        - 用户名
        - 邮箱
      - 下部分：租户信息
        - 企业名称
        - 企业描述
        - 所处行业
      - 进入页面默认所有填写框不可编辑，页面再下方有编辑按钮，点击后页面所有填写框可编辑，点击保存按钮后，页面所有填写框不可编辑，并保存修改后的内容
  - 退出登录
    退出到http://localhost:5173/landing




## 2. 功能模块详细说明

### 2.1 工作台模块
#### 2.1.1 功能页面位置
系统首页，用户登录后的默认页面




#### 2.1.2 功能描述
工作台作为用户的主要工作界面，提供任务跟踪、AI交互和查看历史对话记录功能，替代了之前仪表盘的位置

#### 2.1.3 具体功能描述
1. 右侧工作区：
   - 分为左右两个部分
   - 右侧：任务跟踪区域
   - 左侧：AI交互区域

2. 任务跟踪区域
   - 任务跟踪标题栏：
     - 显示"任务跟踪"文字
     - 包含两个标签页：
       - "进行中碳足迹核算任务"（默认选中）
       - "其他代办任务"
   - 任务列表展示：
     - 以列表形式展示任务信息
     - 进行中碳足迹核算任务列表字段：序号、核算任务名称、核算产品、AI Agent、状态、更新时间；点击这条数据的任意地方都可直接跳转对应任务编辑页
       - 核算产品：产品名称
       - 状态：只展示"进行中"的任务
       - 更新时间：上次编辑保存的时间
     - 列表按照更新时间倒序排序
     - 支持任务状态的实时更新
     - 其他代办任务列表字段：序号、任务名称、任务类型、状态、更新时间；点击这条数据的任意地方—（该行的任意位置）都可直接跳转对应任务管理的编辑页
    AI交互区域
   - AI交互标题：
     - 显示"今天您想了解点什么？"的提示文字
   - 输入区域：
     - 文本输入框，支持多行输入（点击ctrl+enter换行）
     - 占据页面中间位置
     - 默认显示输入提示文字
     - 输入后点击发送或按回车键提交，提交后触发AI对话
   - AI Agent展示区：
     - 显示"使用适合的AI碳足迹Agent，建立、跟踪碳足迹核算任务："提示文字
     - 以横向布局展示3个AI Agent卡片
     - 每个AI Agent卡片包含：
       - Agent图标
       - Agent名称（ISO14067专家/欧盟新电池法专家/EPD专家）
       - Agent功能描述
     - 卡片支持点击选择，点击后触发新增AI建模核算任务（并不是进行在当前页面的对话）
   - 历史对话记录：
     - 位于输入框左侧，以菜单栏的方式展示历史对话的标题，点击后可进入对应对话，并可在输入框继续对话；
     - 用户发送的消息靠右显示
     - AI回复的消息靠左显示
     - 支持显示多种类型的回复内容（文本、图表等）

5. 页面样式  
   - 配色方案：
     - 主色调：蓝色系
     - 强调色：适当使用醒目的色彩标识重要信息
     - 文字颜色：主要文字深色，次要文字浅色
   - 布局规范：
     - 左侧导航栏固定宽度
     - 右侧内容区域自适应宽度
     - 上下分区比例合理
     - 留有适当的内边距和外边距
   - 响应式设计：
     - 支持不同分辨率下的自适应布局
     - 保证核心功能区域的可用性

### 2.2 任务管理模块
#### 2.2.1 功能页面位置
系统主导航栏中的"任务管理"选项

#### 2.2.2 功能描述
统一管理平台所有类型的任务，提供任务跟踪和管理功能。

#### 2.2.3 具体功能描述
- 页面标题：任务管理

1. 任务列表展示
   - 任务列表页面：
     - 列表字段包括：任务ID、任务名称、任务类型、创建时间、负责人、状态、操作栏
     - 任务类型：核算任务、供应商任务、内部数据收集任务
     - 状态：进行中、已完成、已关闭
     - 操作栏：包含任务跟进按钮、关闭、详情按钮
       - 任务跟进按钮：点击后跳转至对应任务的编辑页面
        - 若任务类型为核算任务，则跳转至对应任务的碳足迹核算页面
        - 若任务类型为供应商任务，则跳转至供应商任务编辑页面
        - 若任务类型为内部数据收集任务，则跳转至内部数据收集任务编辑页面
       - 关闭按钮：点击后二次弹窗确认后关闭任务，关闭的任务没有任务跟进按钮，状态变为已关闭；
       - 详情按钮：点击后跳转至对应任务的详情页面
   - 任务筛选功能：
     - 支持按任务类型筛选
     - 支持按状态筛选
     - 支持按负责人筛选
     - 支持按时间范围筛选
     - 增加查询和重置按钮，点击查询后，按照筛选条件查询任务，点击重置后，清除所有筛选条件
   - 任务排序功能：
     - 支持按创建时间排序
   
2. 任务编辑页面
   - 当任务类型为核算任务时，编辑页直接跳转碳足迹核算页面
   - 当任务类型为供应商任务时，跳转至供应商任务编辑页面
    - 供应商任务编辑页面后续再设计
   - 当任务类型为内部数据收集任务时，跳转至内部数据收集任务编辑页面
    - 内部数据收集任务编辑页面后续再设计
3. 任务详情页：
     - 同编辑页面，内容固定不可编辑；

### 2.3 产品碳足迹模块
#### 2.3.1 产品管理
##### 2.3.1.1 功能页面位置
系统主导航栏中的"产品碳足迹"下的"产品管理"选项

##### 2.3.1.2 功能描述
管理产品基本信息，支持产品数据的导入导出。

##### 2.3.1.3 具体功能描述
1. 产品信息配置
   - 产品列表页面：
     - 列表字段包括：产品ID、产品名称、产品类别、创建时间、更新时间、状态、操作栏
     - 状态：启用、禁用
     - 操作栏：包含编辑、删除、启用/禁用按钮
   - 新增产品：
     - 点击新增产品按钮，打开新增产品表单
     - 表单字段包括：
       - 产品名称：必填，长度限制1-50个字符
       - 产品类别：必填，从预设类别中选择
       - 产品描述：选填，长度限制0-500个字符
       - 产品图片：选填，支持jpg、png格式，大小不超过2MB
       - 产品规格：选填，JSON格式存储
   - 编辑产品：
     - 点击编辑按钮，打开编辑产品表单
     - 表单字段与新增产品相同
     - 支持修改所有字段
   - 删除产品：
     - 点击删除按钮，弹出确认框
     - 确认后删除产品及相关数据
   - 启用/禁用产品：
     - 点击启用/禁用按钮，弹出确认框
     - 确认后更改产品状态

2. 产品数据管理
   - 数据导入功能：
     - 支持Excel、CSV格式导入
     - 导入前可下载模板
     - 导入时可选择更新或新增模式
     - 导入后显示导入结果统计
   - 数据导出功能：
     - 支持导出选中产品或全部产品
     - 支持Excel、CSV、PDF格式导出
     - 导出时可选择导出字段
   - 数据验证和校验：
     - 导入时自动校验数据格式
     - 校验失败时显示具体错误信息
     - 支持部分数据导入（跳过错误数据）
   - 历史版本管理：
     - 记录产品信息的修改历史
     - 支持查看和比较不同版本
     - 支持回滚到历史版本

#### 2.3.2 AI建模核算
##### 2.3.2.1 功能页面位置
系统主导航栏中的"产品碳足迹"下的"AI建模核算"选项

##### 2.3.2.2 功能描述
支持新增以及配置已有的建模核算任务，通过AI技术辅助进行碳足迹核算。

##### 2.3.2.3 具体功能描述
1. 建模任务列表页面：
     - 列表字段包括：任务ID、任务名称、核算产品、可信得分、创建时间、更新时间、更新人、操作栏
     - 操作栏：包含编辑、删除按钮
   - 新增建模任务：代替当前代码中，产品碳足迹管理-碳足迹工作台中创建新工作流
   - 编辑建模任务：编辑已有的建模任务
   - 删除建模任务：
     - 点击删除按钮，弹出确认框
     - 确认后删除任务及相关数据


#### 2.3.3 碳足迹结果生成
##### 2.3.3.1 功能页面位置
系统主导航栏中的"产品碳足迹"下的"碳足迹结果生成"选项

##### 2.3.3.2 功能描述
支持基于已完成的AI建模核算任务生成结果，包括碳足迹报告、核验机构需要的数据清单、报表等。

##### 2.3.3.3 具体功能描述
1. 报告生成
   - 报告列表页面：
     - 列表字段包括：报告ID、报告名称、关联任务、生成时间、报告类型、状态、操作栏
     - 报告类型：碳足迹报告、核验数据清单、统计报表
     - 状态：生成中、已完成、生成失败
     - 操作栏：包含预览、下载、删除按钮
   - 碳足迹报告自动生成：
     - 选择已完成的核算任务，点击生成报告按钮
     - 系统自动生成标准格式的碳足迹报告
     - 报告内容包括：产品信息、核算方法、数据来源、核算结果、结论建议等
   - 报告模板管理：
     - 支持自定义报告模板
     - 模板内容包括：页面布局、章节结构、图表样式等
     - 支持模板的导入导出
   - 报告预览和编辑：
     - 支持在线预览报告内容
     - 支持对报告内容进行编辑
     - 编辑后可重新生成报告

2. 数据清单生成
   - 核验机构数据清单生成：
     - 选择已完成的核算任务，点击生成数据清单按钮
     - 系统自动生成符合核验要求的数据清单
     - 数据清单内容包括：原始数据、计算过程、结果数据等
   - 数据导出功能：
     - 支持导出数据清单为Excel、CSV格式
     - 支持选择性导出部分数据
     - 导出时可选择数据格式和单位
   - 报表生成功能：
     - 支持生成多种类型的统计报表
     - 报表类型包括：趋势分析、对比分析、分布分析等
     - 支持自定义报表模板和样式

### 2.4 供应商管理模块
#### 2.4.1 功能页面位置
系统主导航栏中的"供应商管理"选项

#### 2.4.2 功能描述
管理供应商信息，建立供应商与产品的关联关系。

#### 2.4.3 具体功能描述
1. 供应商信息管理
   - 供应商列表页面：
     - 列表字段包括：供应商ID、供应商名称、联系人、联系电话、邮箱、地址、状态、操作栏
     - 状态：启用、禁用
     - 操作栏：包含编辑、删除、启用/禁用按钮
   - 供应商基本信息维护：
     - 新增供应商：
       - 点击新增供应商按钮，打开新增供应商表单
       - 表单字段包括：
         - 供应商名称：必填，长度限制1-50个字符
         - 联系人：必填，长度限制1-20个字符
         - 联系电话：必填，符合电话号码格式
         - 邮箱：必填，符合邮箱格式
         - 地址：选填，长度限制0-200个字符
         - 备注：选填，长度限制0-500个字符
     - 编辑供应商：
       - 点击编辑按钮，打开编辑供应商表单
       - 表单字段与新增供应商相同
       - 支持修改所有字段
     - 删除供应商：
       - 点击删除按钮，弹出确认框
       - 确认后删除供应商及相关数据
     - 启用/禁用供应商：
       - 点击启用/禁用按钮，弹出确认框
       - 确认后更改供应商状态
   - 供应商数据导入导出：
     - 数据导入功能：
       - 支持Excel、CSV格式导入
       - 导入前可下载模板
       - 导入时可选择更新或新增模式
       - 导入后显示导入结果统计
     - 数据导出功能：
       - 支持导出选中供应商或全部供应商
       - 支持Excel、CSV、PDF格式导出
       - 导出时可选择导出字段
   - 供应商信息查询：
     - 支持按供应商名称查询
     - 支持按联系人查询
     - 支持按状态查询
     - 支持组合条件查询

2. 产品关联管理
   - 供应商与产品关联：
     - 在供应商详情页面，显示关联产品列表
     - 点击添加关联产品按钮，打开产品选择对话框
     - 可选择多个产品进行关联
     - 关联时可设置关联类型和备注信息
   - 关联关系维护：
     - 支持编辑关联关系
     - 支持解除关联关系
     - 支持批量解除关联
   - 关联数据统计：
     - 显示供应商关联的产品数量
     - 显示产品关联的供应商数量
     - 支持按产品类别统计供应商分布
     - 支持按供应商类型统计产品分布

### 2.5 AI知识库模块
#### 2.5.1 功能页面位置
系统主导航栏中的"AI知识库"选项

#### 2.5.2 功能描述
提供知识检索和AI对话功能，支持知识积累和分享。

#### 2.5.3 具体功能描述
1. 知识检索
   - 全文检索：
     - 支持关键词搜索
     - 支持多关键词组合搜索
     - 支持搜索结果的排序和筛选
     - 支持搜索历史记录
   - 分类检索：
     - 支持按知识类别检索
     - 支持按标签检索
     - 支持按时间范围检索
     - 支持按作者检索
   - 检索结果展示：
     - 以列表形式展示检索结果
     - 每个结果项显示：标题、摘要、类别、标签、更新时间
     - 支持结果项的预览和查看详情
     - 支持结果项的收藏和分享

2. AI对话功能
   - 智能问答：
     - 支持自然语言提问
     - AI根据知识库内容回答问题
     - 支持多轮对话
     - 支持追问和澄清
   - 对话历史记录：
     - 自动保存所有对话记录
     - 支持查看历史对话列表
     - 支持搜索历史对话内容
     - 支持删除历史对话记录
   - 知识推荐：
     - 根据用户提问自动推荐相关知识
     - 推荐内容包括：相关文档、相关问答、相关案例
     - 支持推荐内容的反馈和评价
     - 支持推荐内容的收藏和分享

### 2.6 组织管理模块
#### 2.6.1 功能页面位置
系统主导航栏中的"组织管理"选项

#### 2.6.2 功能描述
管理组织基本信息，支持多组织架构。

#### 2.6.3 具体功能描述
1. 组织信息管理
   - 组织基本信息维护：
     - 组织列表页面：
       - 列表字段包括：组织ID、组织名称、组织类型、创建时间、状态、操作栏
       - 组织类型：集团组织、子组织
       - 状态：启用、禁用
       - 操作栏：包含编辑、删除、启用/禁用按钮
     - 新增组织：
       - 点击新增组织按钮，打开新增组织表单
       - 表单字段包括：
         - 组织名称：必填，长度限制1-50个字符
         - 组织类型：必填，从预设类型中选择
         - 组织代码：必填，长度限制1-20个字符，支持字母、数字、下划线
         - 联系人：必填，长度限制1-20个字符
         - 联系电话：必填，符合电话号码格式
         - 邮箱：必填，符合邮箱格式
         - 地址：选填，长度限制0-200个字符
         - 备注：选填，长度限制0-500个字符
     - 编辑组织：
       - 点击编辑按钮，打开编辑组织表单
       - 表单字段与新增组织相同
       - 支持修改所有字段
     - 删除组织：
       - 点击删除按钮，弹出确认框
       - 确认后删除组织及相关数据
     - 启用/禁用组织：
       - 点击启用/禁用按钮，弹出确认框
       - 确认后更改组织状态
   - 组织架构管理：
     - 组织架构树形展示：
       - 以树形结构展示组织架构
       - 支持展开/折叠节点
       - 支持搜索节点
     - 组织架构编辑：
       - 支持添加子组织
       - 支持编辑组织信息
       - 支持删除组织节点
       - 支持拖拽调整组织架构
   - 组织权限配置：
     - 角色管理：
       - 支持创建、编辑、删除角色
       - 角色包括：超级管理员、管理员、普通用户等
       - 每个角色可配置不同的权限
     - 权限配置：
       - 支持按模块配置权限
       - 支持按功能配置权限
       - 支持按数据配置权限
     - 用户分配：
       - 支持将用户分配给不同角色
       - 支持用户角色的批量分配
       - 支持用户角色的批量取消

### 2.7 下载管理模块
#### 2.7.1 功能页面位置
系统主导航栏中的"下载管理"选项

#### 2.7.2 功能描述
集中管理所有可下载的文件。

#### 2.7.3 具体功能描述
1. 文件管理
   - 文件分类展示：
     - 文件列表页面：
       - 列表字段包括：文件ID、文件名称、文件类型、文件大小、上传时间、上传人、下载次数、操作栏
       - 文件类型：报告、数据清单、报表、其他
       - 操作栏：包含下载、删除、分享按钮
     - 文件分类：
       - 支持按文件类型分类
       - 支持按上传时间分类
       - 支持按上传人分类
     - 文件搜索：
       - 支持按文件名称搜索
       - 支持按文件内容搜索
       - 支持按标签搜索
   - 文件下载：
     - 支持单个文件下载
     - 支持批量文件下载
     - 支持下载进度显示
     - 支持断点续传
   - 下载历史记录：
     - 显示用户的下载历史
     - 包括：文件名称、下载时间、下载状态
     - 支持下载历史的搜索和筛选
     - 支持重新下载历史文件

### 2.8 操作日志模块
#### 2.8.1 功能页面位置
系统主导航栏中的"操作日志"选项

#### 2.8.2 功能描述
记录系统所有操作行为，提供审计追踪。

#### 2.8.3 具体功能描述
1. 日志记录
   - 用户操作记录：
     - 记录字段包括：日志ID、操作时间、操作用户、操作模块、操作类型、操作内容、操作结果、IP地址
     - 操作类型：新增、修改、删除、查询、导出、导入等
     - 操作结果：成功、失败
   - 系统操作记录：
     - 记录字段包括：日志ID、操作时间、操作模块、操作类型、操作内容、操作结果
     - 操作类型：系统启动、系统关闭、数据备份、数据恢复等
     - 操作结果：成功、失败、警告
   - 操作时间记录：
     - 精确记录操作时间，精确到秒
     - 支持按时间范围查询日志
     - 支持按时间排序日志

2. 日志查询
   - 日志检索：
     - 支持按操作用户检索
     - 支持按操作模块检索
     - 支持按操作类型检索
     - 支持按操作时间检索
     - 支持按操作结果检索
     - 支持组合条件检索
   - 日志导出：
     - 支持导出选中日志或全部日志
     - 支持Excel、CSV、PDF格式导出
     - 导出时可选择导出字段
   - 日志分析：
     - 支持操作频率统计
     - 支持操作类型分布统计
     - 支持操作结果统计
     - 支持异常操作识别

## 3. 非功能需求

### 3.1 性能需求
- 系统响应时间：页面加载时间不超过3秒
- 并发用户数：支持100个以上用户同时在线操作
- 数据处理能力：支持大规模数据导入导出

### 3.2 安全需求
- 用户认证和授权：
  - 支持用户名密码认证
  - 支持双因素认证
  - 支持单点登录
  - 支持角色权限控制
- 数据加密传输：
  - 使用HTTPS协议
  - 敏感数据加密存储
  - 数据传输加密
- 操作日志记录：
  - 记录所有用户操作
  - 记录所有系统操作
  - 日志不可删除和修改
- 数据备份恢复：
  - 定期自动备份数据
  - 支持手动备份数据
  - 支持数据恢复功能

### 3.3 可用性需求
- 系统可用性99.9%：
  - 系统故障时间不超过0.1%
  - 系统维护时间不超过0.1%
- 支持7*24小时运行：
  - 系统不间断运行
  - 支持在线维护和升级
- 提供故障恢复机制：
  - 自动故障检测
  - 自动故障转移
  - 自动故障恢复

### 3.4 可维护性需求
- 模块化设计：
  - 功能模块独立
  - 接口标准化
  - 代码结构清晰
- 完善的文档：
  - 用户使用手册
  - 开发技术文档
  - 运维管理文档
- 便捷的维护接口：
  - 系统监控接口
  - 日志查询接口
  - 配置管理接口
