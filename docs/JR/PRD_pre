1. 前言

1.1 版本信息
 
 
1.2 变更日志
时间
变更人
主要变更内容




1.3 名词解释

术语 / 缩略词
说明
流
输入或输出
 
 
 


1.4 需求评审记录
[05/15] 业务需求评审
- 参会人：
- 评审内容：供应链核算管理、LCA数据库-管理端
- 会议结论：
- 
- 会后Todo：
- Todo



2. 需求范围【待完善】
分类
需求点
需求说明
优先级
首页
工作台
 
 

任务管理
 
 

产品碳足迹-产品管理
 
 

产品管理
 
 

 AI建模核算
 


碳足迹结果生成



供应商管理



AI知识库






基础功能
组织管理



下载管理



操作日志



账户管理



用户管理



角色管理



权限管理



订阅管理




























3. 交互原型图




4. 业务流程图



5. 详细功能描述

6. 系统概述

6.1 系统架构
系统采用Web应用架构，主要分为以下部分：
- 左侧导航栏：提供所有功能模块的快速访问
页面布局
  - 左侧导航栏：
    - 固定宽度，显示所有功能模块入口
    - 模块包括：工作台、任务管理、产品碳足迹（含子菜单：产品管理、AI建模核算、碳足迹结果生成）、供应商管理、AI知识库、组织管理、下载管理、操作日志
    - 当前选中的菜单项高亮显示
    - 带有子菜单的项目显示展开/收起图标
- 右侧工作区：展示当前选中模块的具体内容
- 右上角为用户信息，展示用户名，下拉选项包含：
  - 账户管理
    - 点击后跳转至账户管理页面
    页面内包含上下两部分内容：
      - 上部分：用户信息
        - 用户名
        - 邮箱
      - 下部分：租户信息
        - 企业名称
        - 企业描述
        - 所处行业
      - 进入页面默认所有填写框不可编辑，页面再下方有编辑按钮，点击后页面所有填写框可编辑，点击保存按钮后，页面所有填写框不可编辑，并保存修改后的内容
  - 退出登录
  退出到http://localhost:5173/landing
[图片]
[图片]
账户管理
6.1.1 【待完善】工作台模块

[图片]
6.1.1.1 2.1.1 功能页面位置
1. 系统首页，用户登录后的默认页面
6.1.1.2 2.1.2 功能描述
2. 工作台作为用户的主要工作界面，提供任务跟踪、AI交互和查看历史对话记录功能，替代了之前仪表盘的位置
3. 
6.1.1.3 2.1.3 具体功能描述
4. 右侧工作区：
  1. 分为左右两个部分
  2. 右侧：任务跟踪区域
  3. 左侧：AI交互区域
5. 
6. 任务跟踪区域
  1. 任务跟踪标题栏：
    1. 显示"任务跟踪"文字
    2. 包含两个标签页：
      1. "进行中碳足迹核算任务"（默认选中）
      2. "其他代办任务"
  2. 任务列表展示：
    1. 以列表形式展示任务信息
    2. 进行中碳足迹核算任务列表字段：序号、核算任务名称、核算产品、AI Agent、状态、更新时间；点击这条数据的任意地方都可直接跳转对应任务编辑页
      1. 核算产品：产品名称
      2. 状态：只展示"进行中"的任务
      3. 更新时间：上次编辑保存的时间
    3. 列表按照更新时间倒序排序
    4. 支持任务状态的实时更新
    5. 其他代办任务列表字段：序号、任务名称、任务类型、状态、更新时间；点击这条数据的任意地方—（该行的任意位置）都可直接跳转对应任务管理的编辑页
    6. AI交互区域
  3. AI交互标题：
    1. 显示"今天您想了解点什么？"的提示文字
  4. 输入区域：
    1. 文本输入框，支持多行输入（点击ctrl+enter换行）
    2. 占据页面中间位置
    3. 默认显示输入提示文字
    4. 输入后点击发送或按回车键提交，提交后触发AI对话
    5. AI对话过程中如果涉及到调用了AI知识库的内容，需要附上链接，用户点击后可打开新标签页查看该文件
  5. AI Agent展示区：
    1. 显示"使用适合的AI碳足迹Agent，建立、跟踪碳足迹核算任务："提示文字
    2. 以横向布局展示3个AI Agent卡片
    3. 每个AI Agent卡片包含：
      1. Agent图标
      2. Agent名称（ISO14067专家/欧盟新电池法专家/EPD专家）
      3. Agent功能描述
    4. 卡片支持点击选择，点击后触发新增AI建模核算任务（并不是进行在当前页面的对话）
  6. 历史对话记录：
    1. 位于输入框左侧，以菜单栏的方式展示历史对话的标题，点击后可进入对应对话，并可在输入框继续对话；
    2. 用户发送的消息靠右显示
    3. AI回复的消息靠左显示
    4. 支持显示多种类型的回复内容（文本、图表等）
7. 
8. 页面样式  
  1. 配色方案：
    1. 主色调：蓝色系
    2. 强调色：适当使用醒目的色彩标识重要信息
    3. 文字颜色：主要文字深色，次要文字浅色
  2. 布局规范：
    1. 左侧导航栏固定宽度
    2. 右侧内容区域自适应宽度
    3. 上下分区比例合理
    4. 留有适当的内边距和外边距
  3. 响应式设计：
    1. 支持不同分辨率下的自适应布局
    2. 保证核心功能区域的可用性
9. 
6.1.2 【待完善】任务管理模块
[图片]

2.2.1 功能页面位置
系统主导航栏中的"任务管理"选项

2.2.2 功能描述
统一管理平台所有类型的任务，提供任务跟踪和管理功能。

2.2.3 具体功能描述
- 页面标题：任务管理
1. 任务列表展示
  - 任务列表页面：
    - 列表字段包括：任务ID、任务名称、任务类型、创建时间、负责人、状态、操作栏
    - 任务类型：核算任务、供应商任务、内部数据收集任务
    - 状态：进行中、已完成、已关闭
    - 操作栏：包含任务跟进按钮、关闭、详情按钮
      - 任务跟进按钮：点击后跳转至对应任务的编辑页面
      - 若任务类型为核算任务，则跳转至对应任务的碳足迹核算页面
      - 若任务类型为供应商任务，则跳转至供应商任务编辑页面
      - 若任务类型为内部数据收集任务，则跳转至内部数据收集任务编辑页面
      - 关闭按钮：点击后二次弹窗确认后关闭任务，关闭的任务没有任务跟进按钮，状态变为已关闭；
      - 详情按钮：点击后跳转至对应任务的详情页面
  - 任务筛选功能：
    - 支持按任务类型筛选
    - 支持按状态筛选
    - 支持按负责人筛选
    - 支持按时间范围筛选
    - 增加查询和重置按钮，点击查询后，按照筛选条件查询任务，点击重置后，清除所有筛选条件
  - 任务排序功能：
    - 支持按创建时间排序
2. 任务编辑页面
  - 当任务类型为核算任务时，编辑页直接跳转碳足迹核算页面
  - 当任务类型为供应商任务时，跳转至供应商任务编辑页面
  - 供应商任务编辑页面后续再设计
  - 当任务类型为内部数据收集任务时，跳转至内部数据收集任务编辑页面
  - 内部数据收集任务编辑页面后续再设计
3. 任务详情页：
  - 同编辑页面，内容固定不可编辑；

6.1.3 产品碳足迹模块
6.1.3.1 产品管理
6.1.3.1.1 功能页面位置
系统主导航栏中的"产品碳足迹"下的"产品管理"选项
6.1.3.1.2 功能描述
管理产品基本信息，支持产品数据的增删改查，导入导出，后期支持开放接口集成。
6.1.3.1.3 具体功能描述
1. 产品列表页面：
- 列表字段包括：产品ID、产品名称、创建时间、更新人、更新时间、操作栏
  - 操作栏：包含配置产品信息、删除、查看
2. 新增产品：
- 点击新增产品按钮，打开新增产品表单
- 表单字段包括：
  - 产品名称：必填，长度限制1-50个字符
  - 产品描述：非必填，长度限制0-500个字符
  - 产品图片：非必填，支持jpg、png格式，大小不超过2MB
  - 产品规格：非必填
3. 配置产品信息：
- 点击配置产品信息按钮，打开编辑产品表单
- 分tab展示：产品基本信息、BOM清单、产品设计信息
  - 产品基本信息：
    - 表单字段与新增产品相同，支持单独编辑保存；
    - 所有字段均可修改

4. 删除产品：
  - 点击删除按钮，弹出确认框
  - 删除校验是否关联AI建模核算任务，若关联则不允许删除，toast提示；
  - 确认后删除产品及相关数据



产品跟原始文件关联


6.1.3.2 AI建模核算


[图片]


[图片]
列表页
[图片]
建模页面
6.1.3.2.1 功能页面位置
系统主导航栏中的"产品碳足迹"下的"AI建模核算"选项
6.1.3.2.2 功能描述
支持配置（增删改查）已有的建模核算任务，通过AI agent方式辅助进行碳足迹核算，也支持手动以工作流方式进行核算；
6.1.3.2.3 具体功能描述
6.1.3.2.3.1 前端页面分布及功能概述
分成三个不同功能用途的面板样式，通过右上角按钮切换，默认展示数据操作台面板
- 数据操作台面板：（即现在的面板视图，用于主要的用户操作和交互页面）
  - 页面左侧chat界面，右侧为具体操作界面；
  - chat界面，用于与用户问答交互，并完成下述工作：
    - 输入：
      - 保存并分析用户从chat输入的数据，包括如：确定的预置条件、导入数据或补充数据等；
    - 输出：
      - 引导用户确定预置条件；
      - 分析当前建模情况、可信得分情况，引导用户进行数据补充，以及可信分数提高；
      - 回答用户建模、碳管理或其他平台相关问题；
  - 右侧具体操作界面，分顶部、上左、上中、上右、下左、下右四部分；
    - 顶部：展示功能按钮：AI数据补全、AI因子匹配、检查点管理（测试功能）
    - 上左：展示场景信息，可手动编辑保存
    - 上中：展示原始文件信息，支持上传，以及手动解析；
    - 上右：展示可信分数情况；
    - 下左：展示生命周期阶段导航栏，可点击筛选特定阶段的排放源数据；
    - 下右：展示排放源数据清单；
      - 列表字段：排放源名称、排放源类别、活动数据、活动数据单位、单位转换系数、排放因子名称、排放因子单位、数据库名称、排放因子来源、更新时间、更新人、操作；
        - 操作栏：编辑、删除、查看；
- 流程图面板：（即目前的节点面板，后续作为LCA建模页面）
- 数据查验面板：（新增内容，用于用户自查、核验机构复查以及查看数据全貌的页面）
  - 列表第一行是大标题表头，第二行是小标题表头，采用合并单元格的方式实现大表头包含小表头，大表头和小表头的对应关系如下：
    - 基本信息（大表头）：生命周期阶段、排放源名称、排放源类别、排放源补充信息；
    - 活动水平数据（大表头）：数值、单位、运输-起点地址、运输-终点地址、证据文件；
    - 背景数据（大表头）：名称、数值（kgCO2e）、单位、地理代表性、时间代表性、数据库名称、UUID；
    - 单位转换（大表头）：系数；
    - 排放结果（大表头）：排放量（kgCO2e）
    - 操作（大表头），没有小表头，直接跟小表头合并单元格；
  - 列表字段均取自排放源的真实数据，需要特殊注意的展示逻辑如下：
    - 所有数值类内容，展示小数点后6位；
    - 没有数据的字段，展示“缺失”，并用红色UI美化胶囊风格字体（同操作台面板）；
    - 操作：编辑、删除、查看；
      - 编辑排放源，取与操作台页面相同的抽屉；
      - 删除需要二次确认；
      - 查看排放源，与编辑页内容相同，所有字段固定不可编辑，按钮不可点击，下方按钮仅有“返回”，没有保存按钮；
  - 筛选项：生命周期阶段、排放源名称、排放源类别、仅显示缺失数据
  - 
6.1.3.2.3.2 各部分详细逻辑
6.1.3.2.3.2.1 场景信息确认【红色部分MVP可暂不支持】
- 用户开始建模需要确认场景信息，包括：确定预期核验级别、确定满足标准、确定待核算的产品、确定功能单位、确定基准流；点击设置可编辑场景信息；所有字段均为非必填；
  - 核算任务名称：填写框，必填，作为该核算任务的名称；
  - 预期核验级别：枚举：准核验级别、披露级别；
  - 满足标准：枚举：ISO14067、欧盟电池法；（回头会有很多标准，每个标准的不同维度的要求需要单独放表维护，这块就会变成标准ID的枚举：标准表、可信分要求、生命周期阶段要求等）
  - 核算产品：取产品表的枚举；（有单独产品管理模块管理产品信息，需要进行关联）
    - 后面可能会在建模部分加上产品信息上传的功能，直接触发新增产品并关联；
  - 功能单位：填写框、手动编辑；
  - 基准流：数值填写框，填写数值，大于0，保留小数点后10位；单位填写框，文本，填写单位
- 页面展示，展示预期核验等级、满足标准、核算产品、功能单位、基准流；所有内容未填写时，展示未设置，黄色字体，用胶囊UI美化，要求符合整体风格；
  - 基准流：展示数值填写框+单位填写框的内容；
6.1.3.2.3.2.2 数据文件导入解析
- 描述：用户导入不同格式文件，平台存储、解析并按照既定格式生成多条的排放源数据；
- 具体逻辑：
  - 支持格式：MVP支持.csv或.xlsx格式文件；
  - 导入文件类型：【红色部分MVP可暂不支持】
    - BOM数据清单：原材料数据；
    - 能耗数据清单：组装厂的加工能耗数据；
    - 废弃数据清单：描述工厂尾料的废弃处置情况；
    - 运输数据清单：
      - 原材料的运输数据清单：对应到每个原材料，怎么从生产厂运到加工或组装厂的；（通常跟BOM清单在一个表里）
      - 成品运输数据清单：对应成品，组装或加工完成后，成品到终端（用户等）的运输数据；
    - 使用数据清单：通常是产品的规格说明书等；
    - 成品废弃数据清单：通常没有固定数据收集清单，一般基于BOM数据清单，以及假设条件进行计算；
  - 点击上传文件，弹窗，可拖拽或点击批量上传文件，支持为每个文件配置文件类型，点击确认后在原始文件列表中展示文件信息，点击取消，删除上传的文件
[图片]
  - 原始文件列表：文件名称、文件类型、状态、操作；
    - 状态：显示状态枚举：未解析、解析中、解析失败、解析完成
    - 操作：解析（解析完成状态下，文字改为重新解析）、查看、删除；
  - 解析原始文件：
    - 二次弹窗确认后开始解析，状态变为解析中；
  - 重点逻辑：
    - 给每条排放源加“数据解析状态”以及“来源文件”字段；
      - 数据解析状态：两种状态（用0和1区分都行，前端不展示这个字段），即区分解析完成但未生成节点数据（0）和已生成节点数据（1）。
        - 仅已生成节点数据（1）状态的排放源，在排放源清单展示，并参与后续计算等一系列交互；
        - 解析完成但未生成节点数据（0）状态的排放源，只会在原始文件详情页面展示，作为解析结果的留存，
  - 查看原始文件：
    - 弹窗显示文件具体信息和状态：
      - 标题：文件名称
      - 上传时间
      - 文件路径：URL，点击打开新标签栏预览；
      - 解析结果：
        - 状态：同列表状态；
          - 当未解析时，展示置灰的提示文案：数据未解析
          - 当解析中时，展示置灰的提示文案：数据解析中，请稍后
          - 解析失败时，展示解析失败原因；
          - 解析完成，展示解析结果数据；
        - 解析结果概览：展示解析成功的内容，失败的内容，失败的原因，最好能生成错误数据文件；
        - 解析结果数据，列表字段：排放源名称、排放源类别、活动数据数值、活动数据单位
    - 可多选，点击【导入当前模型】，二次确认后将所有解析的排放源导入当前模型，选择解析后的结果一键导入当前模型；
- 触发：手动触发或通过chat对话触发；
- 业务流程图：（虚线MVP可暂不支持）
暂时无法在Lark文档外展示此内容
- 解析的数据，需要与来源文件绑定，并能支持一键撤销生成建模
- 模型查验模式（企业自身或机构用），单独页面（后期可配合chat box辅助），展示核验的内容，基于不同侧重点（可切换展示不同维度数据，换不同列）
6.1.3.2.3.2.3 排放源清单
[图片]
- 左侧导航栏：
  - 全部：展示全部生命周期阶段数据，默认选择该tab；（单独样式突出显示）
  - 生命周期阶段：如果左侧选中了阶段的tab，默认反显当前生命周期阶段的枚举；
- 筛选框：排放源名称
- 列表字段：序号、排放源名称、活动水平数据状态、证明材料、背景数据状态、数据风险、操作
  - 活动水平数据状态，枚举：“完整，部分AI补充”、“完整”、“缺失”；不同状态的校验依据如下：
    - 完整，部分AI补充：如果活动数据（包括活动数据数值、活动数据单位）任意内容为AI生成，则为这个状态（由于AI数据补充还没做，这个状态加上，但可以先没有触发条件）
    - 完整：活动数据数值和活动数据单位均完整；
    - 缺失：活动数据数值和活动数据单位有任意一项为空；
  - 证明材料，枚举：“完整，验证未通过”、“完整”、“缺失”；不同状态的校验依据如下：
    - 完整，验证未通过：已上传证明材料，但证明材料的验证未通过（由于还没有证明材料的功能，所以先默认上传的文件都已验证通过）
    - 完整：已上传证明材料，且证明材料验证通过（由于还没有证明材料的功能，所以先默认上传的文件都已验证通过）
    - 缺失：未上传证明材料
  - 背景数据状态，枚举：“完整，手动选择”、“完整，AI匹配”、“缺失”；不同状态的校验依据如下：
    - 完整，手动选择：当因子匹配状态为“已手动配置因子”
    - 完整，AI匹配：当因子匹配状态为“AI匹配成功”
    - 缺失：因子名称为空
  - 数据风险，文本，展示该条数据的数据风险，若无则显示无；
  - 重点逻辑：每个字段都有对应的来源字段，用来表示这个数据的生成来源，目前枚举：手动填写、文件解析、AI生成；（后面AI生成可以再细分，用来区分可信度）
- 新增排放源，分为四大部分：
  - 基本信息
    - 生命周期阶段：必填，下拉单选；
    - 排放源名称：必填，填写框；
    - 排放源类别：必填，下拉单选；
    - 排放源补充信息：非必填，填写框
  - 活动水平数据：
    - 活动数据数值：必填，填写框，保留小数点后10位，正数；
    - 活动数据单位：必填，填写框；
    - 关联证据文件：可点击上传按钮上传证据文件，上传后的证据文件会显示在下方，点击可跳转预览；
      - 最多可上传5个证据文件
  - 背景数据：
    - 可点击tab切换数据库检索或手动填写，默认数据库检索；
    - 手动填写：
      - 排放源名称，必填，填写框；
      - 排放因子数值（kgCO2e），必填，填写框，保留小数点后10位，可正可负；
      - 排放因子分母单位，必填，填写框；
      - 地理代表性，非必填，填写框；
      - 发布时间，非必填，填写框；
      - 数据库名称，非必填，填写框；
      - 因子UUID，非必填，填写框；
    - 数据库检索：字段与手动填写相同，但是所有内容均置灰不可编辑，且不校验必填；
      - 可点击选择排放因子，打开检索排放因子的弹窗（【待补充】），选中因子后，确定，并将该因子的数据反显至背景数据部分的所有字段
    - 保存时，要记录背景数据tab是数据库检索还是手动填写，再次打开编辑时自动切换对应tab，并反显内容。
  - 单位转换：
    - 文案：将活动水平数据单位与排放因子单位进行转换：1 AA BB对应 ___ CC DD
      - 其中AA取当前页面用户填写的活动数据单位；
      - BB取当前页面用户填写的排放源名称
      - ___为填写框，即单位转换系数的数值，由用户填写，非必填
      - CC取当前页面用户填写的排放因子分母单位
      - DD取当前页面用户填写的排放因子名称
  - 排放源名称、排放源类别、活动数据数值、活动数据单位、单位转换系数、排放因子名称、排放因子单位、数据库名称、因子UUID
6.1.3.2.3.2.4 因子匹配
[图片]
- 描述：批量将每个排放源匹配上合适的排放因子
- 具体逻辑：
  - 点击背景数据匹配，弹窗进行匹配的操作：
    - 标题：背景数据匹配；
    - 按钮：AI匹配
    - 列表展示当前模型的所有排放源，列表字段包括：多选框、序号、生命周期阶段、排放源名称、排放源类别、排放源补充信息、活动数据数值、活动数据单位、因子名称、因子单位、地理代表性、单位转换系数，匹配状态，操作；
      - 多选框：可多选，选择表头处的多选框可全选当前筛选条件下的所有排放源；选中后点击AI匹配按钮，可对选中的因子进行AI匹配；
      - 因子匹配状态：枚举包括：未配置因子、AI匹配失败、AI匹配成功、已配置因子；
        - 未配置因子：当排放源因子为空时，状态为未匹配；
        - AI匹配失败：当点击AI匹配后没有找到匹配的因子，则显示匹配失败；
        - AI匹配成功：当点击AI匹配后找到了匹配的因子，则显示匹配成功；
        - 已手动配置因子：当通过手动配置因子后，该因子状态为“已手动配置因子”
      - 操作：选择因子，点击弹窗选择因子
    - 筛选项：生命周期阶段（枚举）、排放源名称（填写框）、排放源类别（枚举）、因子匹配状态
    - 选择因子弹窗，用于检索并选择因子；
      - 列表展示字段包括：活动名称、产品名称、因子UUID、地理代表性、时间代表性、发布时间、数值、分子单位、分母单位

【待完善】

  - 数据库：基于ecoinvent数据库，后续扩展其他；
  
  
  
  - 匹配逻辑：（优先级从高到低）
    - 名称相关性：因子和排放源名称的字符相似度； 
    - 同义词（联想词）：维护因子名称的关联词，用关联词与排放源名称进行匹配；
    - 词义相似度
    - 降级匹配：根据排放源最大占比材料匹配因子；
- 触发：异步，按钮手动触发或chat对话触发；（后面可以做成可配置的，另外如果耗时时间比较久的话，后面可以再考虑下锁定的逻辑）
- 业务流程图：
6.1.3.2.3.2.5 AI数据补齐【红色部分MVP可暂不支持】
- 描述：通过大模型，对缺失的活动数据进行自动补齐；
- 具体逻辑：
  - 具体场景：几个场景应该有先后次序，依次校验触发，也可单独触发
    - 场景1：自动补全活动数据数值（基于知识库自动补全活动数据，比如只知道电池用到了碳酸锂，但是不确定用量，自动基于行业调研的数值自动获取用量）；
      - 前提：需要有排放源名称，且明确模型研究的具体产品（建模预置条件）
    - 场景2：运输数据，只有起点和终点的情况，自动补全“距离”数值；
      - 前提：需要有起点和终点位置信息；
    - 场景3：自动补全单位转换系数（比如一支笔，但是匹配的因子是kgCO2e/kg，自动补全一支笔的平均重量作为单位转换系数）；
      - 前提：需要匹配到因子且有活动数据数值和单位；
    - 场景4：自动添加关键排放源（基于知识库推荐应有的重点排放源，只生成名称）
      - 前提：明确模型研究的具体产品（建模预置条件）
  - AI补全的数据需要进行标记（需要对具体字段进行标记，而不仅仅是某条排放源数据）
- 触发：按钮，手动触发，校验各场景前提是否达成，未达成则提示需要补齐数据；
6.1.3.2.3.2.6 可信打分【后面打分机制会重新修改，MVP先按已有的逻辑进行】
- 描述：基于模型完整度、数据可追溯性、质量平衡、数据验证四个维度对模型进行实时打分，用来帮助用户理解自己建模的可信程度，作为指导用户继续进行模型优化工作的基础；不同预置条件下，打分机制以及意义不同；
- 具体逻辑：
  - 当前逻辑：可信打分机制设计V1.0.pdf
- 触发：核算任务（预期核验级别、满足标准、核算产品）或排放源字段数据发生变化时；
6.1.3.2.3.2.7 AI agent引导【红色部分MVP可暂不支持】
- 描述：AI chat agent，用来基于模型情况或知识库回答用户问题，以及引导用户完善模型；
- 具体逻辑：
  - 进入建模页面，重新加载chat；
    - 判断场景信息：
      - 判断场景信息是否有空值，如果有空，需要引导用户进行补充完整；
      - 如果都有值，则给出用户几个帮助的选择：
        - 如何优化可信分数？
        - 下一步应该干什么？
        - 询问专业问题
    - 优化可信分数：
      - 汇报每个子项的分数；
      - 说明在现在的场景信息下，为了满足需求需要达到的分数；
      - 提出提分的改进意见
    - 补充数据的引导；
      - 缺失数据的提醒；
      - 数据收集任务的生成和跟踪；
    - 其他软性建议：
      - 活动数据数值过大或过小；
      - 非常见单位；
      - 非常见排放源的判断和校验；
      
    - 可信分反馈，引导提分；
    - 业务流程图：

同行对标，提示用户数值的差异性




6.1.3.3 【待完善】碳足迹结果生成
2.3.3.1 功能页面位置
系统主导航栏中的"产品碳足迹"下的"碳足迹结果生成"选项

2.3.3.2 功能描述
支持基于已完成的AI建模核算任务生成结果，包括碳足迹报告、核验机构需要的数据清单、报表等。

2.3.3.3 具体功能描述
1. 报告生成
  - 报告列表页面：
    - 列表字段包括：报告ID、报告名称、关联任务、生成时间、报告类型、状态、操作栏
    - 报告类型：碳足迹报告、核验数据清单、统计报表
    - 状态：生成中、已完成、生成失败
    - 操作栏：包含预览、下载、删除按钮
  - 碳足迹报告自动生成：
    - 选择已完成的核算任务，点击生成报告按钮
    - 系统自动生成标准格式的碳足迹报告
    - 报告内容包括：产品信息、核算方法、数据来源、核算结果、结论建议等
  - 报告模板管理：
    - 支持自定义报告模板
    - 模板内容包括：页面布局、章节结构、图表样式等
    - 支持模板的导入导出
  - 报告预览和编辑：
    - 支持在线预览报告内容
    - 支持对报告内容进行编辑
    - 编辑后可重新生成报告

2. 数据清单生成
  - 核验机构数据清单生成：
    - 选择已完成的核算任务，点击生成数据清单按钮
    - 系统自动生成符合核验要求的数据清单
    - 数据清单内容包括：原始数据、计算过程、结果数据等
  - 数据导出功能：
    - 支持导出数据清单为Excel、CSV格式
    - 支持选择性导出部分数据
    - 导出时可选择数据格式和单位
  - 报表生成功能：
    - 支持生成多种类型的统计报表
    - 报表类型包括：趋势分析、对比分析、分布分析等
    - 支持自定义报表模板和样式

6.1.4 【待完善】供应商管理模块
6.1.4.1 2.4.1 功能页面位置
1. 系统主导航栏中的"供应商管理"选项
2. 
6.1.4.2 2.4.2 功能描述
3. 管理供应商信息，建立供应商与产品的关联关系。
4. 
6.1.4.3 2.4.3 具体功能描述
5. 供应商信息管理
  1. 供应商列表页面：
    1. 列表字段包括：供应商ID、供应商名称、联系人、联系电话、邮箱、地址、状态、操作栏
    2. 状态：启用、禁用
    3. 操作栏：包含编辑、删除、启用/禁用按钮
  2. 供应商基本信息维护：
    1. 新增供应商：
      1. 点击新增供应商按钮，打开新增供应商表单
      2. 表单字段包括：
        1. 供应商名称：必填，长度限制1-50个字符
        2. 联系人：必填，长度限制1-20个字符
        3. 联系电话：必填，符合电话号码格式
        4. 邮箱：必填，符合邮箱格式
        5. 地址：选填，长度限制0-200个字符
        6. 备注：选填，长度限制0-500个字符
    2. 编辑供应商：
      1. 点击编辑按钮，打开编辑供应商表单
      2. 表单字段与新增供应商相同
      3. 支持修改所有字段
    3. 删除供应商：
      1. 点击删除按钮，弹出确认框
      2. 确认后删除供应商及相关数据
    4. 启用/禁用供应商：
      1. 点击启用/禁用按钮，弹出确认框
      2. 确认后更改供应商状态
  3. 供应商数据导入导出：
    1. 数据导入功能：
      1. 支持Excel、CSV格式导入
      2. 导入前可下载模板
      3. 导入时可选择更新或新增模式
      4. 导入后显示导入结果统计
    2. 数据导出功能：
      1. 支持导出选中供应商或全部供应商
      2. 支持Excel、CSV、PDF格式导出
      3. 导出时可选择导出字段
  4. 供应商信息查询：
    1. 支持按供应商名称查询
    2. 支持按联系人查询
    3. 支持按状态查询
    4. 支持组合条件查询
6. 产品关联管理
  1. 供应商与产品关联：
    1. 在供应商详情页面，显示关联产品列表
    2. 点击添加关联产品按钮，打开产品选择对话框
    3. 可选择多个产品进行关联
    4. 关联时可设置关联类型和备注信息
  2. 关联关系维护：
    1. 支持编辑关联关系
    2. 支持解除关联关系
    3. 支持批量解除关联
  3. 关联数据统计：
    1. 显示供应商关联的产品数量
    2. 显示产品关联的供应商数量
    3. 支持按产品类别统计供应商分布
    4. 支持按供应商类型统计产品分布
7. 
6.1.5 【待完善】AI知识库模块
[图片]
6.1.5.1 2.5.1 功能页面位置
8. 系统主导航栏中的"AI知识库"选项
9. 
6.1.5.2 2.5.2 功能描述
10. 提供知识检索和AI对话功能，支持知识积累和分享。
11. 
6.1.5.3 2.5.3 具体功能描述
12. 页面分为左中右三部分，左侧为AI解析结果，中侧为搜索、选择文件及原文件展示区域，右侧为AI对话区域。左中右分别占比为2/5、2/5、1/5。
13.   页面标题：AI知识库
14.   左侧：AI解析结果展示区域，展示选定文件的AI解析结果，若没有选中文件则为空，展示置灰的提示词“选择知识库文件后展示AI解析结果”；
15.     有两个tab，分别为“知识库默认解析结果”和“保存的AI解析结果”（从左到右），默认展示“保存的AI解析结果”，若为空，则展示“知识库默认解析结果”；
16.       知识库默认解析结果：展示预制好的AI解析结果，不可编辑；
17.       保存的AI解析结果：展示用户保存的AI解析结果，可编辑保存，点击编辑后变为可编辑状态，这时编辑按钮变为保存按钮，点击保存按钮后进行编辑内容的保存，同时内容变为不可编辑状态，同时按钮变为编辑按钮；
18.   中侧：搜索及原文件展示区域，分为搜索界面和文件展示界面，可打开多个文件，用上方的tab菜单分割，关闭文件展示tab则会关闭该文件的展示界面，文档搜索tab不可关闭；
19.     搜索界面：界面中上方展示搜索框，搜索框右侧有搜索按钮（icon），输入内容并点击（或enter）后触发搜索功能，在下方展示搜索结果；下方可切换搜索池为“知识库”或“个人知识库”，默认选中知识库，当选择知识库时，搜索会基于知识库进行搜索，搜索会基于个人知识库进行搜索，同时当选择个人知识库时，下方会增加上传按钮，用户点击后可进行文件上传，上传的文件会自动保存到个人知识库中；
20.       搜索结果展示：
21.         搜索结果列表：按照卡片的样式展示，卡片展示文件名称、文件类型（枚举：标准法规、行业报告、LCA研究报告）、重点覆盖行业（枚举：通用、纺织、化工、钢铁、水泥、造纸、电力、航空、建筑、其他）、发布时间；
22.           点击卡片后，会打开一个该文件的tab，同时左侧AI解析结果区域展示该文件的AI解析结果，若该文件有保存的AI解析结果则展示“保存的AI解析结果”，否则展示“知识库默认解析结果”；
23.     文件展示界面：直接展示文件全部具体内容（如文件是pdf，则直接展示对应pdf的实际内容即可），支持上下滚动，鼠标移到上方tab时，tab背景变亮，同时在该tab的最右侧出现一个小×，点击×后关闭该文件；点击tab后，文件展示界面展示该文件的全部具体内容；
24.   右侧：AI对话区域，展示AI对话记录，用户可以输入文字与AI对话，AI对话支持：1）帮助寻找适合的知识库文件并打开；2）解析当前打开的文件，并把解析内容生成在该文件的“保存的AI解析结果”中；3）基于知识库回答用户的问题；
25. 
26. 
27. 
28. 知识检索
  1. 全文检索：
    1. 支持关键词搜索
    2. 支持多关键词组合搜索
    3. 支持搜索结果的排序和筛选
    4. 支持搜索历史记录
  2. 分类检索：
    1. 支持按知识类别检索
    2. 支持按标签检索
    3. 支持按时间范围检索
    4. 支持按作者检索
  3. 检索结果展示：
    1. 以列表形式展示检索结果
    2. 每个结果项显示：标题、摘要、类别、标签、更新时间
    3. 支持结果项的预览和查看详情
    4. 支持结果项的收藏和分享
29. 
30. AI对话功能
  1. 智能问答：
    1. 支持自然语言提问
    2. AI根据知识库内容回答问题
    3. 支持多轮对话
    4. 支持追问和澄清
  2. 对话历史记录：
    1. 自动保存所有对话记录
    2. 支持查看历史对话列表
    3. 支持搜索历史对话内容
    4. 支持删除历史对话记录
  3. 知识推荐：
    1. 根据用户提问自动推荐相关知识
    2. 推荐内容包括：相关文档、相关问答、相关案例
    3. 支持推荐内容的反馈和评价
    4. 支持推荐内容的收藏和分享
31. 
6.1.6 【待完善】组织管理模块
6.1.6.1 2.6.1 功能页面位置
- 多租户，但租户下admin用户仅一个，有查看ecoinvent数值的权限


系统主导航栏中的"组织管理"选项
32. 
6.1.6.2 2.6.2 功能描述
33. 管理组织基本信息，支持多组织架构。
34. 
6.1.6.3 2.6.3 具体功能描述
35. 组织信息管理
  1. 组织基本信息维护：
    1. 组织列表页面：
      1. 列表字段包括：组织ID、组织名称、组织类型、创建时间、状态、操作栏
      2. 组织类型：集团组织、子组织
      3. 状态：启用、禁用
      4. 操作栏：包含编辑、删除、启用/禁用按钮
    2. 新增组织：
      1. 点击新增组织按钮，打开新增组织表单
      2. 表单字段包括：
        1. 组织名称：必填，长度限制1-50个字符
        2. 组织类型：必填，从预设类型中选择
        3. 组织代码：必填，长度限制1-20个字符，支持字母、数字、下划线
        4. 联系人：必填，长度限制1-20个字符
        5. 联系电话：必填，符合电话号码格式
        6. 邮箱：必填，符合邮箱格式
        7. 地址：选填，长度限制0-200个字符
        8. 备注：选填，长度限制0-500个字符
    3. 编辑组织：
      1. 点击编辑按钮，打开编辑组织表单
      2. 表单字段与新增组织相同
      3. 支持修改所有字段
    4. 删除组织：
      1. 点击删除按钮，弹出确认框
      2. 确认后删除组织及相关数据
    5. 启用/禁用组织：
      1. 点击启用/禁用按钮，弹出确认框
      2. 确认后更改组织状态
  2. 组织架构管理：
    1. 组织架构树形展示：
      1. 以树形结构展示组织架构
      2. 支持展开/折叠节点
      3. 支持搜索节点
    2. 组织架构编辑：
      1. 支持添加子组织
      2. 支持编辑组织信息
      3. 支持删除组织节点
      4. 支持拖拽调整组织架构
  3. 组织权限配置：
    1. 角色管理：
      1. 支持创建、编辑、删除角色
      2. 角色包括：超级管理员、管理员、普通用户等
      3. 每个角色可配置不同的权限
    2. 权限配置：
      1. 支持按模块配置权限
      2. 支持按功能配置权限
      3. 支持按数据配置权限
    3. 用户分配：
      1. 支持将用户分配给不同角色
      2. 支持用户角色的批量分配
      3. 支持用户角色的批量取消
36. 
6.1.7 【待完善】下载管理模块
6.1.7.1 2.7.1 功能页面位置
37. 系统主导航栏中的"下载管理"选项
38. 
6.1.7.2 2.7.2 功能描述
39. 集中管理所有可下载的文件。
40. 
6.1.7.3 2.7.3 具体功能描述
41. 文件管理
  1. 文件分类展示：
    1. 文件列表页面：
      1. 列表字段包括：文件ID、文件名称、文件类型、文件大小、上传时间、上传人、下载次数、操作栏
      2. 文件类型：报告、数据清单、报表、其他
      3. 操作栏：包含下载、删除、分享按钮
    2. 文件分类：
      1. 支持按文件类型分类
      2. 支持按上传时间分类
      3. 支持按上传人分类
    3. 文件搜索：
      1. 支持按文件名称搜索
      2. 支持按文件内容搜索
      3. 支持按标签搜索
  2. 文件下载：
    1. 支持单个文件下载
    2. 支持批量文件下载
    3. 支持下载进度显示
    4. 支持断点续传
  3. 下载历史记录：
    1. 显示用户的下载历史
    2. 包括：文件名称、下载时间、下载状态
    3. 支持下载历史的搜索和筛选
    4. 支持重新下载历史文件
42. 
6.1.8 【待完善】操作日志模块
2.8.1 功能页面位置
系统主导航栏中的"操作日志"选项

2.8.2 功能描述
记录系统所有操作行为，提供审计追踪。

2.8.3 具体功能描述
43. 日志记录
  - 用户操作记录：
    - 记录字段包括：日志ID、操作时间、操作用户、操作模块、操作类型、操作内容、操作结果、IP地址
    - 操作类型：新增、修改、删除、查询、导出、导入等
    - 操作结果：成功、失败
  - 系统操作记录：
    - 记录字段包括：日志ID、操作时间、操作模块、操作类型、操作内容、操作结果
    - 操作类型：系统启动、系统关闭、数据备份、数据恢复等
    - 操作结果：成功、失败、警告
  - 操作时间记录：
    - 精确记录操作时间，精确到秒
    - 支持按时间范围查询日志
    - 支持按时间排序日志

44. 日志查询
  - 日志检索：
    - 支持按操作用户检索
    - 支持按操作模块检索
    - 支持按操作类型检索
    - 支持按操作时间检索
    - 支持按操作结果检索
    - 支持组合条件检索
  - 日志导出：
    - 支持导出选中日志或全部日志
    - 支持Excel、CSV、PDF格式导出
    - 导出时可选择导出字段
  - 日志分析：
    - 支持操作频率统计
    - 支持操作类型分布统计
    - 支持操作结果统计
    - 支持异常操作识别

3. 非功能需求
暂无
















`;


#核算任务数据库设计：


表一：核算任务表
核算任务ID：主键，16位唯一编码；
预期核验等级：枚举，准核验级别、披露级别；
满足标准：枚举，ISO14067、欧盟电池法；
核算产品：文本
总可信得分：整数
模型完整度得分：整数
数据可追溯性得分：整数
质量平衡得分：整数
数据验证得分：整数
核算任务包含生命周期阶段：枚举，值1-5，分别对应：原材料获取阶段、生产阶段、分销运输阶段、使用阶段、寿命终止阶段，多个用逗号隔开

表二：排放源清单表
排放源ID：主键，16位唯一编码；
核算任务ID：关联核算任务表的ID
排放源所在阶段：枚举，值1-5，分别对应：原材料获取阶段、生产阶段、分销运输阶段、使用阶段、寿命终止阶段
排放源名称：文本
排放源类别：枚举，值1-5，分别对应：原材料获取阶段、生产阶段、分销运输阶段、使用阶段、寿命终止阶段
活动数据：数值，保留10位小数
活动数据单位：枚举：包括
单位转换系数：数值，保留10位小数
排放因子名称：文本
排放因子单位：文本
排放因子来源：文本
更新时间：时间
更新人：文本


#页面设计：

保留左侧chat部分，以及右侧“一键AI补全”和“检查点管理”功能
修改右侧节点图功能为列表形式，修改的PRD如下：
右侧分为顶部上左、上右、下左、下右四部分：
1. 顶部：展示“一键AI补全”和“检查点管理”功能按钮（点击后要能实现之前对应的功能）
2. 上左：展示当前模型的场景信息：
  - 展示：
    - 标题：场景信息：
    - 预期核验等级：反显设置的对应内容，枚举：准核验级别、披露级别；当未设置时，展示：未设置；
    - 满足标准：反显设置的对应内容，ISO14067、欧盟电池法；当未设置时，展示：未设置；
    - 核算产品：反显设置的对应内容，当未设置时，展示：未设置；
  - 设置：
    - 点击设置，弹窗，可编辑预期核验等级、满足标准、核算产品，均为必填，编辑后，点击保存，保存成功后，更新上左的内容；
      - 预期核验等级：下拉单选，枚举：准核验级别、披露级别；
      - 满足标准：下拉单选，枚举：ISO14067、欧盟电池法；
      - 核算产品：输入框，输入产品名称；

    2. 上右：展示当前核算任务的模型评分：
      - 标题：模型评分
      - 展示内容：.
        - 总可信分数：展示分数，格式为 "得分/总分"（如：50/100分）
        - 模型完整度评分：展示分数，格式为 "得分/总分"（如：50/100分）
        - 数据可追溯性评分：展示分数，格式为 "得分/总分"（如：50/100分）
        - 质量平衡评分：展示分数，格式为 "得分/总分"（如：50/100分）
        - 数据验证评分：展示分数，格式为 "得分/总分"（如：50/100分）
    3. 下左：生命周期阶段导航栏
      - 以列表形式展示以下阶段：
        - 原材料获取阶段
        - 生产阶段
        - 分销运输阶段
        - 使用阶段
        - 寿命终止阶段
      - 每个阶段可点击，点击后切换到对应阶段的排放源清单

    4. 下右：排放源清单表格
    筛选：字段包括：排放源名称、排放源类别
      - 排放源名称搜索框：支持模糊搜索
      - 排放源类别下拉单选：枚举：原材料、包装材料、能耗、运输、废弃物；
      - 查询按钮，点击触发查询
      - 重置按钮，点击重置查询条件
    列表页展示：字段包括：序号、排放源名称、排放源类别、活动数据、活动数据单位、单位转换系数、排放因子名称、排放因子单位、排放因子来源、更新时间、更新人、操作
      - 操作栏：支持编辑、删除、查看；      - 表格支持分页
    新增排放源：点击新增，打开新增排放源抽屉：
      - 排放源名称：文本输入框；
      - 排放源类别：下拉单选，枚举：原材料、包装材料、能耗、运输、废弃物；
      - 活动数据：数值输入框，保留10位小数；
      - 活动数据单位：文本输入框；
      - 单位转换系数：数值输入框，保留10位小数；
      - 排放因子名称：文本输入框；
      - 排放因子单位：文本输入框；
      - 排放因子来源：文本输入框；
      - 保存按钮，点击保存新增排放源；
      - 取消按钮，点击关闭新增排放源抽屉；
    编辑排放源：点击编辑，打开编辑排放源抽屉：
      - 内容与新增排放源一致，但需要反显展示当前排放源的原有数据，所有页面字段都可编辑，点击保存后保存；
    删除排放源：点击删除，弹窗确认，确认后删除，删除后自动刷新表格内容；

交互说明：
    1. 设置功能：
      - 点击设置按钮时弹出设置弹窗
      - 设置内容保存后实时更新显示
    2. 评分显示：
      - 评分实时计算并显示
      - 分数变化时自动更新
    3. 生命周期阶段：
      - 点击不同阶段时切换右侧表格内容
      - 当前选中阶段高亮显示
    4. 排放源清单：
      - 支持排放源的增删改查
      - 表格支持分页和排序
      - 数据变更后自动刷新
`;
